【小酒馆论坛重构 】2017-03-2017-05
原有的小酒馆论坛存在许多问题，诸如表设计（热点字段未分开 可能导致 读写瓶颈。 存储结构不合理），老代码不易维护，经常被恶意刷帖，在controller层切换数据源使得在高并发下失效等等。要解决恶意刷帖刷评论，可以从两方面处理：
内容上：通过DFA算法进行敏感词过滤，有效屏蔽敏感信息，附带的广告信息也能屏蔽部分;
接口上：用户请求的真实性验证（Token身份验证、自定义heaeder）、接口的调用频率限制（Redis锁）、参数校验和文本内容进行转义避免xss攻击
评论的楼层实现方式为使用MySQL的乐观锁、锁的重入；当时也有考虑另外一种实现方式：不加锁，楼层通过异步任务进行更新

【分享有礼重构】 2017-05-2017-06
分享有礼部分功能如下：
1.流水分为用户流水和总流水（复式记账）
2.提现的调用限制、每日总额度都通过Redis实现
3.提现分两步，同步请求第三方接口提现；异步等待第三方回调请求结果，再进行流水的记录和账户金额的变动

【用户中心】  2017-06-至今
用户中心主要用于提供一个后台，用于管理相关系统的接口并分配内部员工的系统权限。验证权限的实现如下
1.其他系统依赖权限验证jar，并对需要进行权限控制的接口配置拦截器。
2.拦截器中获取拦截到的接口上的注解的code值，调用权限验证jar中的接口方法进行权限验证（基于http）。
3.用户中心会在用户登录时缓存用户的权限，并设置超时时间，当用户进行操作时会重置超时时间，登出后移除缓存。

